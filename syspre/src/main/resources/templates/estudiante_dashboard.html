<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Estudiante - SYSPRE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        principal: '#3eb489',
                        fondo: '#f1f5f9',
                        texto: '#1e293b',
                        gris: '#64748b',
                    },
                },
            },
        };
    </script>
</head>
<body class="bg-fondo">
    
    <!-- Navegación Superior -->
    <nav class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <!-- Logo y Título -->
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <img src="/static/img/unap.png" alt="UNAP Logo" class="w-10 h-10">
                        <span class="text-xl font-bold text-texto">SYSPRE</span>
                    </div>
                    <div class="hidden md:block text-sm text-gris">
                        Dashboard Estudiante
                    </div>
                </div>

                <!-- Información del Usuario -->
                <div class="flex items-center space-x-4">
                    <div class="text-right hidden md:block">
                        <div class="text-sm font-medium text-texto" th:text="${user != null ? user.nombres + ' ' + user.apellidos : 'Usuario'}">Juan Pérez</div>
                        <div class="text-xs text-gris" th:text="${user != null ? user.codigo : ''}">2020123456</div>
                    </div>
                    
                    <!-- Menú de Usuario -->
                    <div class="relative">
                        <button class="flex items-center space-x-2 text-gris hover:text-texto transition">
                            <div class="w-8 h-8 bg-principal rounded-full flex items-center justify-center">
                                <i class="fas fa-user text-white text-sm"></i>
                            </div>
                            <i class="fas fa-chevron-down text-xs"></i>
                        </button>
                        
                        <!-- Dropdown del Usuario -->
                        <div class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border py-2 hidden">
                            <a href="/perfil/estudiante" class="flex items-center px-4 py-2 text-sm text-gris hover:text-texto hover:bg-gray-50">
                                <i class="fas fa-user mr-3"></i>Mi Perfil
                            </a>
                            <a href="/estudiante/documentos" class="flex items-center px-4 py-2 text-sm text-gris hover:text-texto hover:bg-gray-50">
                                <i class="fas fa-file-alt mr-3"></i>Mis Documentos
                            </a>
                            <a href="#" class="flex items-center px-4 py-2 text-sm text-gris hover:text-texto hover:bg-gray-50">
                                <i class="fas fa-cog mr-3"></i>Configuración
                            </a>
                            <hr class="my-2">
                            <form method="POST" action="/logout" class="block">
                                <button type="submit" class="w-full text-left flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50">
                                    <i class="fas fa-sign-out-alt mr-3"></i>Cerrar Sesión
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Contenido Principal -->
    <div class="max-w-7xl mx-auto px-4 py-8">
        
        <!-- Header del Dashboard -->
        <div class="mb-8">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                <div>
                    <h1 class="text-3xl font-bold text-texto">Dashboard de Estudiante</h1>
                    <p class="text-gris mt-1">Sistema de Gestión de Prácticas Pre-Profesionales</p>
                </div>
                
                <!-- Estado Global -->
                <div class="mt-4 md:mt-0">
                    <div class="bg-white rounded-lg px-4 py-3 shadow-sm border">
                        <div class="flex items-center space-x-3">
                            <div th:class="${estadoColor == 'gray'} ? 'w-3 h-3 bg-gray-400 rounded-full' : 
                                          (${estadoColor == 'yellow'} ? 'w-3 h-3 bg-yellow-400 rounded-full animate-pulse' :
                                          (${estadoColor == 'blue'} ? 'w-3 h-3 bg-blue-400 rounded-full animate-pulse' :
                                          (${estadoColor == 'green'} ? 'w-3 h-3 bg-green-400 rounded-full' :
                                          'w-3 h-3 bg-red-400 rounded-full')))"></div>
                            <div>
                                <div class="text-sm font-medium text-texto">Estado Actual</div>
                                <div class="text-xs text-gris" th:text="${estadoActual}">Registro Pendiente</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SISTEMA DE FLUJO DE ESTADOS -->
        <div th:if="${estadoPlan != null}" class="mb-8">
            <!-- Barra de Progreso -->
            <div class="bg-white rounded-lg p-6 shadow-sm border mb-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-texto">Progreso del Proceso de Prácticas</h3>
                    <span th:text="${progreso != null ? progreso + '%' : '0%'}" class="text-sm font-medium text-gris">0%</span>
                </div>
                
                <!-- Barra de Progreso Visual -->
                <div class="w-full bg-gray-200 rounded-full h-2 mb-4">
                    <div th:style="'width: ' + ${progreso != null ? progreso : 0} + '%'" 
                         class="bg-principal h-2 rounded-full transition-all duration-500"></div>
                </div>
                
                <!-- Pasos del Proceso - 7 Estados del Flujo de Prácticas Pre-Profesionales -->
                <div class="grid grid-cols-1 md:grid-cols-7 gap-2">
                    <!-- Estado 1: Crear Plan -->
                    <div th:class="${estadoPlan == null or estadoPlan.name() == 'SIN_PLAN'} ? 'text-center p-3 border-2 border-blue-500 rounded-lg bg-blue-100 shadow-md transform scale-105' : 
                                  'text-center p-3 border-2 border-green-500 rounded-lg bg-green-100 shadow-md'">
                        <i th:class="${estadoPlan != null and estadoPlan.name() != 'SIN_PLAN'} ? 'fas fa-check-circle text-green-600 text-lg mb-1' : 
                                     'fas fa-file-plus text-blue-600 text-lg mb-1 animate-pulse'"></i>
                        <div class="text-xs font-semibold">1. Crear Plan</div>
                        <div th:class="${estadoPlan == null or estadoPlan.name() == 'SIN_PLAN'} ? 'text-xs text-blue-600 mt-1 font-medium' : 
                                       'text-xs text-green-600 mt-1'" 
                             th:text="${estadoPlan == null or estadoPlan.name() == 'SIN_PLAN'} ? 'ACTIVO' : 'OK'">Estado</div>
                    </div>
                    
                    <!-- Estado 2: Evaluación Docente -->
                    <div th:class="${estadoPlan != null and estadoPlan.name() == 'PLAN_CREADO'} ? 'text-center p-3 border-2 border-yellow-500 rounded-lg bg-yellow-100 shadow-md transform scale-105' : 
                                  (${estadoPlan != null and (estadoPlan.name() == 'EVALUADO_DOCENTE' or estadoPlan.name() == 'APROBADO_COORDINADOR' or estadoPlan.name() == 'EN_EJECUCION' or estadoPlan.name() == 'REPORTES_ACTIVOS' or estadoPlan.name() == 'INFORME_FINAL' or estadoPlan.name() == 'SUSTENTACION')} ? 'text-center p-3 border-2 border-green-500 rounded-lg bg-green-100 shadow-md' : 
                                  'text-center p-3 border-2 border-gray-300 rounded-lg bg-gray-50 opacity-60')">
                        <i th:class="${estadoPlan != null and (estadoPlan.name() == 'EVALUADO_DOCENTE' or estadoPlan.name() == 'APROBADO_COORDINADOR' or estadoPlan.name() == 'EN_EJECUCION' or estadoPlan.name() == 'REPORTES_ACTIVOS' or estadoPlan.name() == 'INFORME_FINAL' or estadoPlan.name() == 'SUSTENTACION')} ? 'fas fa-check-circle text-green-600 text-lg mb-1' : 
                                     (${estadoPlan != null and estadoPlan.name() == 'PLAN_CREADO'} ? 'fas fa-clock text-yellow-600 text-lg mb-1 animate-pulse' : 
                                     'fas fa-chalkboard-teacher text-gray-400 text-lg mb-1')"></i>
                        <div class="text-xs font-semibold">2. Evaluación Docente</div>
                        <div th:class="${estadoPlan != null and estadoPlan.name() == 'PLAN_CREADO'} ? 'text-xs text-yellow-600 mt-1 font-medium' : 
                                       (${estadoPlan != null and (estadoPlan.name() == 'EVALUADO_DOCENTE' or estadoPlan.name() == 'APROBADO_COORDINADOR' or estadoPlan.name() == 'EN_EJECUCION' or estadoPlan.name() == 'REPORTES_ACTIVOS' or estadoPlan.name() == 'INFORME_FINAL' or estadoPlan.name() == 'SUSTENTACION')} ? 'text-xs text-green-600 mt-1' : 
                                       'text-xs text-gray-400 mt-1')" 
                             th:text="${estadoPlan != null and estadoPlan.name() == 'PLAN_CREADO'} ? 'ESPERA' : 
                                      (${estadoPlan != null and (estadoPlan.name() == 'EVALUADO_DOCENTE' or estadoPlan.name() == 'APROBADO_COORDINADOR' or estadoPlan.name() == 'EN_EJECUCION' or estadoPlan.name() == 'REPORTES_ACTIVOS' or estadoPlan.name() == 'INFORME_FINAL' or estadoPlan.name() == 'SUSTENTACION')} ? 'OK' : 'INACTIVO')">Estado</div>
                    </div>
                    
                    <!-- Estado 3: Aprobación Coordinador -->
                    <div th:class="${estadoPlan != null and estadoPlan.name() == 'EVALUADO_DOCENTE'} ? 'text-center p-3 border-2 border-yellow-500 rounded-lg bg-yellow-100 shadow-md transform scale-105' : 
                                  (${estadoPlan != null and (estadoPlan.name() == 'APROBADO_COORDINADOR' or estadoPlan.name() == 'EN_EJECUCION' or estadoPlan.name() == 'REPORTES_ACTIVOS' or estadoPlan.name() == 'INFORME_FINAL' or estadoPlan.name() == 'SUSTENTACION')} ? 'text-center p-3 border-2 border-green-500 rounded-lg bg-green-100 shadow-md' : 
                                  'text-center p-3 border-2 border-gray-300 rounded-lg bg-gray-50 opacity-60')">
                        <i th:class="${estadoPlan != null and (estadoPlan.name() == 'APROBADO_COORDINADOR' or estadoPlan.name() == 'EN_EJECUCION' or estadoPlan.name() == 'REPORTES_ACTIVOS' or estadoPlan.name() == 'INFORME_FINAL' or estadoPlan.name() == 'SUSTENTACION')} ? 'fas fa-check-circle text-green-600 text-lg mb-1' : 
                                     (${estadoPlan != null and estadoPlan.name() == 'EVALUADO_DOCENTE'} ? 'fas fa-clock text-yellow-600 text-lg mb-1 animate-pulse' : 
                                     'fas fa-users-cog text-gray-400 text-lg mb-1')"></i>
                        <div class="text-xs font-semibold">3. Aprobación Coordinador</div>
                        <div th:class="${estadoPlan != null and estadoPlan.name() == 'EVALUADO_DOCENTE'} ? 'text-xs text-yellow-600 mt-1 font-medium' : 
                                       (${estadoPlan != null and (estadoPlan.name() == 'APROBADO_COORDINADOR' or estadoPlan.name() == 'EN_EJECUCION' or estadoPlan.name() == 'REPORTES_ACTIVOS' or estadoPlan.name() == 'INFORME_FINAL' or estadoPlan.name() == 'SUSTENTACION')} ? 'text-xs text-green-600 mt-1' : 
                                       'text-xs text-gray-400 mt-1')" 
                             th:text="${estadoPlan != null and estadoPlan.name() == 'EVALUADO_DOCENTE'} ? 'ESPERA' : 
                                      (${estadoPlan != null and (estadoPlan.name() == 'APROBADO_COORDINADOR' or estadoPlan.name() == 'EN_EJECUCION' or estadoPlan.name() == 'REPORTES_ACTIVOS' or estadoPlan.name() == 'INFORME_FINAL' or estadoPlan.name() == 'SUSTENTACION')} ? 'OK' : 'INACTIVO')">Estado</div>
                    </div>
                    
                    <!-- Estado 4: Ejecución (Según fecha_inicio) -->
                    <div th:class="${estadoPlan != null and estadoPlan.name() == 'APROBADO_COORDINADOR'} ? 'text-center p-3 border-2 border-yellow-500 rounded-lg bg-yellow-100 shadow-md transform scale-105' : 
                                  (${estadoPlan != null and (estadoPlan.name() == 'EN_EJECUCION' or estadoPlan.name() == 'REPORTES_ACTIVOS' or estadoPlan.name() == 'INFORME_FINAL' or estadoPlan.name() == 'SUSTENTACION')} ? 'text-center p-3 border-2 border-green-500 rounded-lg bg-green-100 shadow-md' : 
                                  'text-center p-3 border-2 border-gray-300 rounded-lg bg-gray-50 opacity-60')">
                        <i th:class="${estadoPlan != null and (estadoPlan.name() == 'EN_EJECUCION' or estadoPlan.name() == 'REPORTES_ACTIVOS' or estadoPlan.name() == 'INFORME_FINAL' or estadoPlan.name() == 'SUSTENTACION')} ? 'fas fa-check-circle text-green-600 text-lg mb-1' : 
                                     (${estadoPlan != null and estadoPlan.name() == 'APROBADO_COORDINADOR'} ? 'fas fa-calendar-alt text-yellow-600 text-lg mb-1 animate-pulse' : 
                                     'fas fa-briefcase text-gray-400 text-lg mb-1')"></i>
                        <div class="text-xs font-semibold">4. Ejecución</div>
                        <div th:class="${estadoPlan != null and estadoPlan.name() == 'APROBADO_COORDINADOR'} ? 'text-xs text-yellow-600 mt-1 font-medium' : 
                                       (${estadoPlan != null and (estadoPlan.name() == 'EN_EJECUCION' or estadoPlan.name() == 'REPORTES_ACTIVOS' or estadoPlan.name() == 'INFORME_FINAL' or estadoPlan.name() == 'SUSTENTACION')} ? 'text-xs text-green-600 mt-1' : 
                                       'text-xs text-gray-400 mt-1')" 
                             th:text="${estadoPlan != null and estadoPlan.name() == 'APROBADO_COORDINADOR'} ? 'ESPERA' : 
                                      (${estadoPlan != null and (estadoPlan.name() == 'EN_EJECUCION' or estadoPlan.name() == 'REPORTES_ACTIVOS' or estadoPlan.name() == 'INFORME_FINAL' or estadoPlan.name() == 'SUSTENTACION')} ? 'OK' : 'INACTIVO')">Estado</div>
                    </div>
                    
                    <!-- Estado 5: Reportes Semanales -->
                    <div th:class="${estadoPlan != null and (estadoPlan.name() == 'EN_EJECUCION' or estadoPlan.name() == 'REPORTES_ACTIVOS')} ? 'text-center p-3 border-2 border-yellow-500 rounded-lg bg-yellow-100 shadow-md transform scale-105' : 
                                  (${estadoPlan != null and (estadoPlan.name() == 'INFORME_FINAL' or estadoPlan.name() == 'SUSTENTACION')} ? 'text-center p-3 border-2 border-green-500 rounded-lg bg-green-100 shadow-md' : 
                                  'text-center p-3 border-2 border-gray-300 rounded-lg bg-gray-50 opacity-60')">
                        <i th:class="${estadoPlan != null and (estadoPlan.name() == 'INFORME_FINAL' or estadoPlan.name() == 'SUSTENTACION')} ? 'fas fa-check-circle text-green-600 text-lg mb-1' : 
                                     (${estadoPlan != null and (estadoPlan.name() == 'EN_EJECUCION' or estadoPlan.name() == 'REPORTES_ACTIVOS')} ? 'fas fa-clipboard-list text-yellow-600 text-lg mb-1 animate-pulse' : 
                                     'fas fa-clipboard-list text-gray-400 text-lg mb-1')"></i>
                        <div class="text-xs font-semibold">5. Reportes Semanales</div>
                        <div th:class="${estadoPlan != null and (estadoPlan.name() == 'EN_EJECUCION' or estadoPlan.name() == 'REPORTES_ACTIVOS')} ? 'text-xs text-yellow-600 mt-1 font-medium' : 
                                       (${estadoPlan != null and (estadoPlan.name() == 'INFORME_FINAL' or estadoPlan.name() == 'SUSTENTACION')} ? 'text-xs text-green-600 mt-1' : 
                                       'text-xs text-gray-400 mt-1')" 
                             th:text="${estadoPlan != null and (estadoPlan.name() == 'EN_EJECUCION' or estadoPlan.name() == 'REPORTES_ACTIVOS')} ? 'ACTIVO' : 
                                      (${estadoPlan != null and (estadoPlan.name() == 'INFORME_FINAL' or estadoPlan.name() == 'SUSTENTACION')} ? 'OK' : 'INACTIVO')">Estado</div>
                    </div>
                    
                    <!-- Estado 6: Informe Final -->
                    <div th:class="${estadoPlan != null and estadoPlan.name() == 'INFORME_FINAL'} ? 'text-center p-3 border-2 border-yellow-500 rounded-lg bg-yellow-100 shadow-md transform scale-105' : 
                                  (${estadoPlan != null and estadoPlan.name() == 'SUSTENTACION'} ? 'text-center p-3 border-2 border-green-500 rounded-lg bg-green-100 shadow-md' : 
                                  'text-center p-3 border-2 border-gray-300 rounded-lg bg-gray-50 opacity-60')">
                        <i th:class="${estadoPlan != null and estadoPlan.name() == 'SUSTENTACION'} ? 'fas fa-check-circle text-green-600 text-lg mb-1' : 
                                     (${estadoPlan != null and estadoPlan.name() == 'INFORME_FINAL'} ? 'fas fa-file-alt text-yellow-600 text-lg mb-1 animate-pulse' : 
                                     'fas fa-file-alt text-gray-400 text-lg mb-1')"></i>
                        <div class="text-xs font-semibold">6. Informe Final</div>
                        <div th:class="${estadoPlan != null and estadoPlan.name() == 'INFORME_FINAL'} ? 'text-xs text-yellow-600 mt-1 font-medium' : 
                                       (${estadoPlan != null and estadoPlan.name() == 'SUSTENTACION'} ? 'text-xs text-green-600 mt-1' : 
                                       'text-xs text-gray-400 mt-1')" 
                             th:text="${estadoPlan != null and estadoPlan.name() == 'INFORME_FINAL'} ? 'ACTIVO' : 
                                      (${estadoPlan != null and estadoPlan.name() == 'SUSTENTACION'} ? 'OK' : 'INACTIVO')">Estado</div>
                    </div>
                    
                    <!-- Estado 7: Sustentación -->
                    <div th:class="${estadoPlan != null and estadoPlan.name() == 'SUSTENTACION'} ? 'text-center p-3 border-2 border-yellow-500 rounded-lg bg-yellow-100 shadow-md transform scale-105' : 
                                  'text-center p-3 border-2 border-gray-300 rounded-lg bg-gray-50 opacity-60'">
                        <i th:class="${estadoPlan != null and estadoPlan.name() == 'SUSTENTACION'} ? 'fas fa-graduation-cap text-yellow-600 text-lg mb-1 animate-pulse' : 
                                     'fas fa-graduation-cap text-gray-400 text-lg mb-1'"></i>
                        <div class="text-xs font-semibold">7. Sustentación</div>
                        <div th:class="${estadoPlan != null and estadoPlan.name() == 'SUSTENTACION'} ? 'text-xs text-yellow-600 mt-1 font-medium' : 
                                       'text-xs text-gray-400 mt-1'" 
                             th:text="${estadoPlan != null and estadoPlan.name() == 'SUSTENTACION'} ? 'ESPERA' : 'INACTIVO'">Estado</div>
                    </div>

                </div>
                
                <!-- Siguiente Paso -->
                <div th:if="${siguientePaso != null}" class="mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                    <div class="flex items-center">
                        <i class="fas fa-info-circle text-blue-600 mr-2"></i>
                        <span class="text-sm font-medium text-blue-800">Siguiente paso: </span>
                        <span th:text="${siguientePaso}" class="text-sm text-blue-700">Información del siguiente paso</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Resumen de Estado -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            
            <!-- Progreso General -->
            <div class="bg-white rounded-lg p-6 shadow-sm border">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gris">Progreso General</p>
                        <p class="text-2xl font-bold text-texto" th:text="${progreso != null ? progreso + '%' : '0%'}">0%</p>
                    </div>
                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-chart-line text-blue-600"></i>
                    </div>
                </div>
            </div>

            <!-- Plan de Prácticas -->
            <div class="bg-white rounded-lg p-6 shadow-sm border">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gris">Plan de Prácticas</p>
                        <p th:if="${estadoPlan.name() == 'SIN_PLAN'}" class="text-2xl font-bold text-gray-400">Sin Crear</p>
                        <p th:if="${estadoPlan.name() == 'PLAN_CREADO'}" class="text-2xl font-bold text-yellow-600">Creado</p>
                        <p th:if="${estadoPlan.name() == 'EVALUADO_DOCENTE'}" class="text-2xl font-bold text-blue-600">Evaluado</p>
                        <p th:if="${estadoPlan.name() == 'APROBADO_COORDINADOR'}" class="text-2xl font-bold text-green-600">Aprobado</p>
                        <p th:if="${estadoPlan.name() == 'EN_EJECUCION'}" class="text-2xl font-bold text-purple-600">En Ejecución</p>
                        <p th:if="${estadoPlan.name() == 'FINALIZADO'}" class="text-2xl font-bold text-green-600">Finalizado</p>
                    </div>
                    <div th:if="${estadoPlan.name() == 'SIN_PLAN'}" class="w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-file-plus text-gray-400"></i>
                    </div>
                    <div th:if="${estadoPlan.name() == 'PLAN_CREADO'}" class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-file-edit text-yellow-600"></i>
                    </div>
                    <div th:if="${estadoPlan.name() == 'EVALUADO_DOCENTE' or estadoPlan.name() == 'APROBADO_COORDINADOR'}" class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-file-check text-green-600"></i>
                    </div>
                    <div th:if="${estadoPlan.name() == 'EN_EJECUCION'}" class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-briefcase text-purple-600"></i>
                    </div>
                    <div th:if="${estadoPlan.name() == 'FINALIZADO'}" class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-trophy text-green-600"></i>
                    </div>
                </div>
            </div>

            <!-- Reportes Semanales -->
            <div class="bg-white rounded-lg p-6 shadow-sm border">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gris">Reportes Semanales</p>
                        <p class="text-2xl font-bold text-yellow-600">3/12</p>
                    </div>
                    <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-calendar-week text-yellow-600"></i>
                    </div>
                </div>
            </div>

            <!-- Sustentación -->
            <div class="bg-white rounded-lg p-6 shadow-sm border">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gris">Sustentación</p>
                        <p class="text-2xl font-bold text-gray-400">Pendiente</p>
                    </div>
                    <div class="w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-graduation-cap text-gray-400"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- TIMELINE DE PASOS -->
        <div class="bg-white rounded-lg shadow-sm border p-6">
            <h2 class="text-xl font-bold text-texto mb-6">Proceso de Prácticas Pre-Profesionales</h2>
            
            <div class="space-y-6">
                
                <!-- PASO 1: Registro del Plan -->
                <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0">
                        <div th:if="${!tienePlan}" class="w-10 h-10 bg-gray-400 rounded-full flex items-center justify-center text-white font-bold">
                            1
                        </div>
                        <div th:if="${tienePlan}" class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white font-bold">
                            ✓
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <!-- SI NO TIENE PLAN - Mostrar opción crear -->
                        <div th:if="${!tienePlan}" class="bg-gray-50 rounded-lg p-4 border-l-4 border-gray-400">
                            <h3 class="text-lg font-semibold text-texto mb-2">
                                <i class="fas fa-file-plus mr-2"></i>Registro de Plan de Prácticas
                            </h3>
                            <p class="text-sm text-gris mb-3">Completa y envía tu plan de prácticas pre-profesionales</p>
                            <div class="flex space-x-2">
                                <a href="/estudiante/plan/crear" class="inline-flex items-center px-3 py-2 bg-blue-500 text-white text-sm rounded hover:bg-blue-600 transition">
                                    <i class="fas fa-plus mr-2"></i>Crear Plan
                                </a>
                            </div>
                        </div>
                        
                        <!-- SI TIENE PLAN - Mostrar opción ver -->
                        <div th:if="${tienePlan}" class="bg-gray-50 rounded-lg p-4 border-l-4 border-green-500">
                            <h3 class="text-lg font-semibold text-texto mb-2">
                                <i class="fas fa-file-alt mr-2"></i>Registro de Plan de Prácticas
                            </h3>
                            <p class="text-sm text-gris mb-3">Completa y envía tu plan de prácticas pre-profesionales</p>
                            <div class="flex space-x-2">
                                <a href="/estudiante/plan/ver" class="inline-flex items-center px-3 py-2 bg-green-500 text-white text-sm rounded hover:bg-green-600 transition">
                                    <i class="fas fa-eye mr-2"></i>Ver Plan
                                </a>
                                <span th:if="${plan.estado == 'borrador'}" class="inline-flex items-center px-3 py-2 bg-yellow-100 text-yellow-800 text-sm rounded">
                                    <i class="fas fa-edit mr-2"></i>Borrador
                                </span>
                                <span th:if="${plan.estado == 'enviado'}" class="inline-flex items-center px-3 py-2 bg-blue-100 text-blue-800 text-sm rounded">
                                    <i class="fas fa-paper-plane mr-2"></i>Enviado
                                </span>
                                <span th:if="${plan.estado == 'aprobado_docente'}" class="inline-flex items-center px-3 py-2 bg-green-100 text-green-800 text-sm rounded">
                                    <i class="fas fa-check mr-2"></i>Aprobado por Docente
                                </span>
                                <span th:if="${plan.estado == 'aprobado_coordinador'}" class="inline-flex items-center px-3 py-2 bg-green-100 text-green-800 text-sm rounded">
                                    <i class="fas fa-check-double mr-2"></i>Completamente Aprobado
                                </span>
                                <span th:if="${plan.estado == 'rechazado'}" class="inline-flex items-center px-3 py-2 bg-red-100 text-red-800 text-sm rounded">
                                    <i class="fas fa-times mr-2"></i>Rechazado
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PASO 2: Aprobación Docente -->
                <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0">
                        <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white font-bold">
                            ✓
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="bg-gray-50 rounded-lg p-4 border-l-4 border-green-500">
                            <h3 class="text-lg font-semibold text-texto mb-2">
                                <i class="fas fa-user-check mr-2"></i>Aprobación Docente
                            </h3>
                            <p class="text-sm text-gris mb-3">Tu docente asesor revisa y aprueba tu plan</p>
                            <div class="flex space-x-2">
                                <span class="inline-flex items-center px-3 py-2 bg-green-100 text-green-800 text-sm rounded">
                                    <i class="fas fa-check mr-2"></i>Aprobado por Docente
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PASO 3: Aprobación Coordinador -->
                <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0">
                        <div class="w-10 h-10 bg-yellow-500 rounded-full flex items-center justify-center text-white font-bold">
                            ⏳
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="bg-gray-50 rounded-lg p-4 border-l-4 border-yellow-500">
                            <h3 class="text-lg font-semibold text-texto mb-2">
                                <i class="fas fa-users-cog mr-2"></i>Aprobación Coordinador
                            </h3>
                            <p class="text-sm text-gris mb-3">El coordinador de carrera revisa y da la aprobación final</p>
                            <div class="flex space-x-2">
                                <span class="inline-flex items-center px-3 py-2 bg-yellow-100 text-yellow-800 text-sm rounded">
                                    <i class="fas fa-clock mr-2"></i>Pendiente de Revisión
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PASO 4: Ejecución de Prácticas -->
                <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0">
                        <div class="w-10 h-10 bg-gray-400 rounded-full flex items-center justify-center text-white font-bold">
                            4
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="bg-gray-50 rounded-lg p-4 border-l-4 border-gray-400">
                            <h3 class="text-lg font-semibold text-texto mb-2">
                                <i class="fas fa-briefcase mr-2"></i>Ejecución de Prácticas
                            </h3>
                            <p class="text-sm text-gris mb-3">Realiza tus prácticas pre-profesionales en la empresa asignada</p>
                            <div class="flex space-x-2">
                                <span class="inline-flex items-center px-3 py-2 bg-gray-100 text-gray-600 text-sm rounded">
                                    <i class="fas fa-hourglass-start mr-2"></i>En Espera
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PASO 5: Reportes Semanales -->
                <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0">
                        <div class="w-10 h-10 bg-gray-400 rounded-full flex items-center justify-center text-white font-bold">
                            5
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="bg-gray-50 rounded-lg p-4 border-l-4 border-gray-400">
                            <h3 class="text-lg font-semibold text-texto mb-2">
                                <i class="fas fa-clipboard-list mr-2"></i>Reportes Semanales
                            </h3>
                            <p class="text-sm text-gris mb-3">Envía reportes semanales de tus actividades y avances</p>
                            <div class="flex space-x-2">
                                <span class="inline-flex items-center px-3 py-2 bg-gray-100 text-gray-600 text-sm rounded">
                                    <i class="fas fa-clock mr-2"></i>En Espera
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PASO 6: Informe Final -->
                <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0">
                        <div class="w-10 h-10 bg-gray-400 rounded-full flex items-center justify-center text-white font-bold">
                            6
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="bg-gray-50 rounded-lg p-4 border-l-4 border-gray-400">
                            <h3 class="text-lg font-semibold text-texto mb-2">
                                <i class="fas fa-file-invoice mr-2"></i>Informe Final
                            </h3>
                            <p class="text-sm text-gris mb-3">Presenta tu informe final de prácticas pre-profesionales</p>
                            <div class="flex space-x-2">
                                <span class="inline-flex items-center px-3 py-2 bg-gray-100 text-gray-600 text-sm rounded">
                                    <i class="fas fa-clock mr-2"></i>En Espera
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PASO 7: Sustentación -->
                <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0">
                        <div class="w-10 h-10 bg-gray-400 rounded-full flex items-center justify-center text-white font-bold">
                            7
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="bg-gray-50 rounded-lg p-4 border-l-4 border-gray-400">
                            <h3 class="text-lg font-semibold text-texto mb-2">
                                <i class="fas fa-graduation-cap mr-2"></i>Sustentación
                            </h3>
                            <p class="text-sm text-gris mb-3">Sustenta tu informe final ante el jurado evaluador</p>
                            <div class="flex space-x-2">
                                <span class="inline-flex items-center px-3 py-2 bg-gray-100 text-gray-600 text-sm rounded">
                                    <i class="fas fa-clock mr-2"></i>En Espera
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Documentos de la Especialidad -->
        <div class="bg-white rounded-lg shadow-sm border p-6 mt-8">
            <h2 class="text-xl font-bold text-texto mb-4 flex items-center">
                <i class="fas fa-download text-blue-600 mr-2"></i>
                Documentos de <span th:text="${user.especialidad}">la Especialidad</span>
            </h2>
            <p class="text-sm text-gris mb-6">Documentos oficiales publicados por el coordinador de tu especialidad</p>
            
            <div th:if="${documentosEspecialidad != null and !documentosEspecialidad.empty}">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div th:each="documento : ${documentosEspecialidad}" 
                         class="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition">
                        <div class="flex items-start justify-between">
                            <div class="flex items-start space-x-3 flex-1">
                                <i class="fas fa-file-pdf text-red-600 text-xl mt-1"></i>
                                <div class="flex-1 min-w-0">
                                    <h3 class="font-semibold text-gray-900 text-sm" th:text="${documento.titulo}">
                                        Título del documento
                                    </h3>
                                    <p class="text-xs text-gray-600 mt-1" th:text="${documento.descripcion}">
                                        Descripción del documento
                                    </p>
                                    <div class="flex items-center mt-2 text-xs text-gray-500">
                                        <i class="fas fa-user-tie mr-1"></i>
                                        <span th:text="${documento.coordinador_nombres + ' ' + documento.coordinador_apellidos}">
                                            Coordinador
                                        </span>
                                        <span class="mx-2">•</span>
                                        <i class="fas fa-calendar mr-1"></i>
                                        <span th:text="${#dates.format(documento.created_at, 'dd/MM/yyyy')}">
                                            Fecha
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <a th:href="@{/estudiante/documento/{id}/descargar(id=${documento.id})}" 
                               class="bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-700 transition">
                                <i class="fas fa-download mr-1"></i>Descargar
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div th:if="${documentosEspecialidad == null or documentosEspecialidad.empty}" 
                 class="text-center py-8">
                <i class="fas fa-folder-open text-4xl text-gray-400 mb-4"></i>
                <h3 class="text-lg font-medium text-gray-900 mb-2">No hay documentos disponibles</h3>
                <p class="text-gray-600">El coordinador de tu especialidad aún no ha publicado documentos</p>
            </div>
        </div>
    </div>

    <script>
        // Toggle del dropdown del usuario
        document.addEventListener('DOMContentLoaded', function() {
            const userButton = document.querySelector('nav button');
            const dropdown = document.querySelector('nav .absolute');
            
            if (userButton && dropdown) {
                userButton.addEventListener('click', function() {
                    dropdown.classList.toggle('hidden');
                });
                
                // Cerrar dropdown al hacer click fuera
                document.addEventListener('click', function(event) {
                    if (!userButton.contains(event.target)) {
                        dropdown.classList.add('hidden');
                    }
                });
            }
        });
    </script>
</body>
</html>